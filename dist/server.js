function rusToLat(e){if(e){let t={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"j","з":"z","и":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"shch","ы":"y","э":"e","ю":"u","я":"ya","ъ":"ie","ь":"","й":"i"};return[...e].map(e=>{let n=t[e.toLocaleLowerCase()];return e!==e.toLocaleLowerCase()?n=n.charAt(0).toLocaleUpperCase()+n.slice(1):void 0===n&&(n=e),n}).join("")}return"_"}function sendRes(e,t,n){if("API_REQUEST"===t){let t=__dirname+"/db.json";var r=null;fs.readFile(t,(t,o)=>{if(t)n.writeHead(404),console.log("Could not find db.json..."),n.end();else{r=JSON.parse(o);var s=r,i=e.split("/")[2],a=e.split("/")[3];switch(console.log("Recieved API request: "+e),i){case"get_folder_emails":return s=[],r.forEach(e=>{rusToLat(e.folder)==a&&s.push(e)}),n.writeHead(200,{"Content-Type":"application/json"}),n.write(JSON.stringify(s)),void n.end();case"get_email_by_date":return s=[],r.forEach(e=>{e.date===a&&s.push(e)}),n.writeHead(200,{"Content-Type":"application/json"}),n.write(JSON.stringify(s)),void n.end()}}})}else{let r=path.join(__dirname+"/",e);fs.readFile(r,(e,o)=>{e?(n.writeHead(404),n.write("File not found | 404"),n.end(),console.log("Could not find file: "+r)):(n.writeHead(200,{"Content-Type":t}),n.write(o),n.end(),console.log("Got file: "+r))})}}function getContentType(e){switch(path.extname(e)){case".html":return"text/html";case".css":return"text/css";case".js":return"text/javascript";case".json":return"application/json";case".svg":return"image/svg";case".png":return"image/png";default:return"application/octate-stream"}}const http=require("http"),fs=require("fs"),path=require("path"),port=3e3,server=http.createServer(function(e,t){"/"===e.url?sendRes("index.html","text/html",t):"api"===e.url.substring(1,4)?sendRes(e.url,"API_REQUEST",t):sendRes(e.url,getContentType(e.url),t)});server.listen(port,function(e){e?console.log("Something went wrong!",e):console.log("Server is listening on port "+port)});