function rusToLat(e){if(e){let t={"Ð°":"a","Ð±":"b","Ð²":"v","Ð³":"g","Ð´":"d","Ðµ":"e","Ñ‘":"e","Ð¶":"j","Ð·":"z","Ð¸":"i","Ðº":"k","Ð»":"l","Ð¼":"m","Ð½":"n","Ð¾":"o","Ð¿":"p","Ñ€":"r","Ñ":"s","Ñ‚":"t","Ñƒ":"u","Ñ„":"f","Ñ…":"h","Ñ†":"c","Ñ‡":"ch","Ñˆ":"sh","Ñ‰":"shch","Ñ‹":"y","Ñ":"e","ÑŽ":"u","Ñ":"ya","ÑŠ":"ie","ÑŒ":"","Ð¹":"i"};return[...e].map(e=>{let n=t[e.toLocaleLowerCase()];return e!==e.toLocaleLowerCase()?n=n.charAt(0).toLocaleUpperCase()+n.slice(1):void 0===n&&(n=e),n}).join("")}return"_"}function sendRes(e,t,n){if("API_REQUEST"===t){let t=__dirname+"/db.json";var r=null;fs.readFile(t,(t,o)=>{if(t)n.writeHead(404),console.log("[31m","Could not find db.json..."),n.end();else{r=JSON.parse(o);var s=r,i=e.split("/")[2],a=e.split("/")[3],l=e.split("/")[4],c=e.split("/")[5];switch(console.log("[35m","Recieved API request: "+e),null!=c&&null!=l||(c=0,l=20),i){case"get_folder_emails":s=[];var u=!1;return r.forEach(e=>{u||(rusToLat(e.folder)==a&&(c<=0?s.push(e):c-=1),s.length>=l&&(u=!0))}),n.writeHead(200,{"Content-Type":"application/json"}),n.write(JSON.stringify(s)),void n.end();case"get_email_by_date":return s=[],r.forEach(e=>{e.date===a&&s.push(e)}),n.writeHead(200,{"Content-Type":"application/json"}),n.write(JSON.stringify(s)),void n.end()}}})}else{let r=path.join(__dirname+"/",e);fs.readFile(r,(e,o)=>{e?(n.writeHead(404),n.write("File not found | 404"),n.end(),console.log("[31m","Could not find file: "+r)):(n.writeHead(200,{"Content-Type":t}),n.write(o),n.end(),console.log("[0m","Got file: "+r))})}}function getContentType(e){switch(path.extname(e)){case".html":return"text/html";case".css":return"text/css";case".js":return"text/javascript";case".json":return"application/json";case".svg":return"image/svg";case".png":return"image/png";default:return"application/octate-stream"}}const http=require("http"),fs=require("fs"),path=require("path"),port=3e3,server=http.createServer(function(e,t){"/"===e.url?sendRes("index.html","text/html",t):"api"===e.url.substring(1,4)?sendRes(e.url,"API_REQUEST",t):sendRes(e.url,getContentType(e.url),t)});server.listen(port,function(e){e?console.log("[31m","Something went wrong!",e):console.log("[0m","Server is listening on port "+port)});